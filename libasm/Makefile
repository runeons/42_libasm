#****************************************************************************#
#*** GENERAL ****************************************************************#
#****************************************************************************#

NAME 		=	libasm.a

CPL 		= 	nasm
FLAGS 		= 	-felf64


#****************************************************************************#
#*** SRCS *******************************************************************#
#****************************************************************************#

SRCS_DIR	= 	./srcs/

SRCS_FILES	=				\
				ft_read.s   \
				ft_strcmp.s \
				ft_strcpy.s \
				ft_strdup.s \
				ft_strlen.s \
				ft_write.s  \

SRCS		=	$(addprefix $(SRCS_DIR), $(SRCS_FILES))


#****************************************************************************#
#*** OBJS *******************************************************************#
#****************************************************************************#

OBJS_DIR 	=	./objs/

OBJS_FILES	=	$(patsubst %.s, %.o, $(SRCS_FILES))

OBJS		=	$(addprefix $(OBJS_DIR), $(OBJS_FILES))

$(OBJS_DIR)%.o: $(SRCS_DIR)%.s
	@ mkdir -p $(dir $@)
	@ $(CPL) $(FLAGS) $< -o $@


#****************************************************************************#
#*** RULES ******************************************************************#
#****************************************************************************#

all		: $(NAME)

$(NAME)	: $(SRCS) $(OBJS)
	@ ar rcs $(NAME) $(OBJS)

clean	:
	@ rm -rf $(OBJS_DIR)

fclean	: clean
	@ rm -f $(NAME)

re		: fclean all

.PHONY: all clean fclean re
